"use strict";var currentRequest=null;!function(p){window.BP_Repost={init:function(){this.bprpa_repost(),this.bprpa_set_param(),this.bprpa_reset_form(),this.bprpa_show_whereto_post()},bprpa_set_param:function(){p.ajaxPrefilter(function(t,i,o){if(0==p(".bp-repost-activity").length)return!0;try{if(null==i.data||void 0===i.data||void 0===i.data.action)return!0}catch(t){return!0}var a=p("#repost-activity-form #original_item_id").val(),e=p("#repost-activity-form #posting_at").val(),r=p("#repost-activity-form #rpa_group_id").val(),n="";void 0!==e&&"groups"===e&&(n="&object=groups&item_id="+r),void 0!==a&&""!==a&&"post_update"===i.data.action&&(t.data+="&original_item_id="+a+"&content=repost"+n)}),p(document).ajaxComplete(function(t,i,o){var a=o.data;void 0!==a&&-1!=a.indexOf("original_item_id")&&p("#repost-box").modal("hide")})},bprpa_repost:function(){p(document).on("submit","#repost-activity-form",function(t){t.preventDefault(),void 0!==RE_Post_Activity.theme_package_id&&("legacy"===RE_Post_Activity.theme_package_id?p("#aw-whats-new-submit").trigger("click"):p("#whats-new-form").trigger("submit"))}),p(document).on("click",".bp-repost-activity",function(t){t.preventDefault();var i=p(this).data("activity_id"),o=p("#activity-stream #activity-"+i+" .activity-inner").html();p("#repost-activity-form #original_item_id").val(i),p("#repost-activity-form .content").html(o)})},bprpa_reset_form:function(){p("#repost-box").on("hidden.bs.modal",function(){p("#repost-activity-form #original_item_id").val(""),p("#repost-activity-form #posting_at").val("")})},bprpa_show_whereto_post:function(){p(document).on("change","#posting_at",function(){var t=p(this).val(),i=p("#rpa_group_id");void 0!==t&&"groups"===t?i.show():i.hide()})}},p(document).on("ready",function(){BP_Repost.init()})}(jQuery);